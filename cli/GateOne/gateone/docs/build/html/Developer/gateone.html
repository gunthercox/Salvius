

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>gateone.py - Gate One&#39;s Main Script &mdash; Gate One 1.1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="top" title="Gate One 1.1.0 documentation" href="../index.html" />
    <link rel="up" title="Developer Documentation" href="index.html" />
    <link rel="next" title="logviewer.py - Session Log Viewer" href="logviewer.html" />
    <link rel="prev" title="authpam.py - A PAM Authentication Module" href="authpam.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="logviewer.html" title="logviewer.py - Session Log Viewer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="authpam.html" title="authpam.py - A PAM Authentication Module"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Gate One Documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Developer Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-gateone">
<span id="gateone-py-gate-one-s-main-script"></span><h1><tt class="xref py py-mod docutils literal"><span class="pre">gateone.py</span></tt> - Gate One's Main Script<a class="headerlink" href="#module-gateone" title="Permalink to this headline">¶</a></h1>
<div class="section" id="gate-one">
<span id="gateone-py"></span><h2>Gate One<a class="headerlink" href="#gate-one" title="Permalink to this headline">¶</a></h2>
<p>Gate One is a web-based terminal emulator written in Python using the Tornado
web framework.  This module runs the primary daemon process and acts as a
central controller for all running terminals and terminal programs.  It supports
numerous configuration options and can also be called with the --kill switch
to kill all running terminal programs (if using dtach--otherwise they die on
their own when gateone.py is stopped).</p>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>Gate One requires Python 2.6+ but runs best with Python 2.7+.  It also depends
on the following 3rd party Python modules:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.tornadoweb.org/">Tornado</a> 2.2+ - A non-blocking web server framework that powers FriendFeed.</li>
</ul>
</div></blockquote>
<p>The following modules are optional and can provide Gate One with additional
functionality:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://launchpad.net/pyopenssl">pyOpenSSL</a> 0.10+ - An OpenSSL module/wrapper for Python.  Only used to generate self-signed SSL keys and certificates.  If pyOpenSSL isn't available Gate One will fall back to using the 'openssl' command to generate self-signed certificates.</li>
<li><a class="reference external" href="http://pypi.python.org/pypi/kerberos">kerberos</a> 1.0+ - A high-level Kerberos interface for Python.  Only necessary if you plan to use the Kerberos authentication module.</li>
<li><a class="reference external" href="http://packages.debian.org/lenny/python-pam">python-pam</a> 0.4.2+ - A Python module for interacting with PAM (the Pluggable Authentication Module present on nearly every Unix).  Only necessary if you plan to use PAM authentication.</li>
</ul>
</div></blockquote>
<p>With the exception of python-pam, both the required and optional modules can usually be installed via one of these commands:</p>
<blockquote>
<div><pre class="ansi-block literal-block">
<span class="ansi-bold ansi-blue">user</span>&#64;modern-host<span class="ansi-bold ansi-blue">:~ $</span> sudo pip install tornado pyopenssl kerberos
</pre>
</div></blockquote>
<p>...or:</p>
<blockquote>
<div><pre class="ansi-block literal-block">
<span class="ansi-bold ansi-blue">user</span>&#64;legacy-host<span class="ansi-bold ansi-blue">:~ $</span> sudo easy_install tornado pyopenssl kerberos
</pre>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The use of pip is recommended.  See <a class="reference external" href="http://www.pip-installer.org/en/latest/installing.html">http://www.pip-installer.org/en/latest/installing.html</a> if you don't have it.</p>
</div>
<p>The python-pam module is available in most Linux distribution repositories.  Simply executing one of the following should take care of it:</p>
<blockquote>
<div><pre class="ansi-block literal-block">
<span class="ansi-bold ansi-blue">user</span>&#64;debian-or-ubuntu-host<span class="ansi-bold ansi-blue">:~ $</span> sudo apt-get install python-pam
</pre>
<pre class="ansi-block literal-block">
<span class="ansi-bold ansi-blue">user</span>&#64;redhat-host<span class="ansi-bold ansi-blue">:~ $</span> sudo yum install python-pam
</pre>
<pre class="ansi-block literal-block">
<span class="ansi-bold ansi-blue">user</span>&#64;gentoo-host<span class="ansi-bold ansi-blue">:~ $</span> sudo emerge python-pam
</pre>
<pre class="ansi-block literal-block">
<span class="ansi-bold ansi-blue">user</span>&#64;suse-host<span class="ansi-bold ansi-blue">:~ $</span> sudo yast -i python-pam
</pre>
</div></blockquote>
</div>
<div class="section" id="settings">
<h3>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h3>
<p>All of Gate One's configurable options can be controlled either via command line
switches or by settings in the server.conf file (they match up 1-to-1).  If no
server.conf exists one will be created using defaults (i.e. when Gate One is run
for the first time).  Settings in the server.conf file use the following format:</p>
<div class="highlight-python"><pre>&lt;setting&gt; = &lt;value&gt;</pre>
</div>
<p>Here's an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">address</span> <span class="o">=</span> <span class="s">&quot;127.0.0.1;::1;10.1.1.4&quot;</span> <span class="c"># Strings are surrounded by quotes</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">443</span> <span class="c"># Numbers don&#39;t need quotes</span>
</pre></div>
</div>
<p>There are a few important differences between the configuration file and
command line switches in regards to boolean values (True/False).  A switch such
as --debug evaluates to &quot;debug = True&quot; and this is exactly how it would be
configured in server.conf:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">debug</span> <span class="o">=</span> <span class="bp">True</span> <span class="c"># Booleans don&#39;t need quotes either</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following values in server.conf are case sensitive: True, False and None (and should not be placed in quotes).</p>
</div>
<p>Running gateone.py with the --help switch will print the usage information as
well as descriptions of what each configurable option does:</p>
<pre class="ansi-block literal-block">
<span class="ansi-bold ansi-red">root</span>&#64;host<span class="ansi-bold ansi-blue">:~ $</span> ./gateone.py --help
Usage: ./gateone.py [OPTIONS]

Options:
&nbsp;&nbsp;--help                           show this help information
&nbsp;&nbsp;--log_file_max_size              max size of log files before rollover
&nbsp;&nbsp;--log_file_num_backups           number of log files to keep
&nbsp;&nbsp;--log_file_prefix=PATH           Path prefix for log files. Note that if you are running multiple tornado processes, log_file_prefix must be different for each of them (e.g. include the port number)
&nbsp;&nbsp;--log_to_stderr                  Send log output to stderr (colorized if possible). By default use stderr if --log_file_prefix is not set and no other logging is configured.
&nbsp;&nbsp;--logging=debug|info|warning|error|none Set the Python log level. If 'none', tornado won't touch the logging configuration.
&nbsp;&nbsp;--address                        Run on the given address.  Default is all addresses (IPv6 included).  Multiple address can be specified using a semicolon as a separator (e.g. '127.0.0.1;::1;10.1.1.100').
&nbsp;&nbsp;--auth                           Authentication method to use.  Valid options are: none, api, google, kerberos, pam
&nbsp;&nbsp;--certificate                    Path to the SSL certificate.  Will be auto-generated if none is provided.
&nbsp;&nbsp;--command                        Run the given command when a user connects (e.g. '/bin/login').
&nbsp;&nbsp;--config                         Path to the config file.  Default: /opt/gateone/server.conf
&nbsp;&nbsp;--cookie_secret                  Use the given 45-character string for cookie encryption.
&nbsp;&nbsp;--debug                          Enable debugging features such as auto-restarting when files are modified.
&nbsp;&nbsp;--disable_ssl                    If enabled, Gate One will run without SSL (generally not a good idea).
&nbsp;&nbsp;--dtach                          Wrap terminals with dtach. Allows sessions to be resumed even if Gate One is stopped and started (which is a sweet feature).
&nbsp;&nbsp;--embedded                       Doesn't do anything (yet).
&nbsp;&nbsp;--enable_unix_socket             Enable Unix socket support use_unix_sockets (if --enable_unix_socket=True).
&nbsp;&nbsp;--https_redirect                 If enabled, a separate listener will be started on port 80 that redirects users to the configured port using HTTPS.
&nbsp;&nbsp;--js_init                        A JavaScript object (string) that will be used when running GateOne.init() inside index.html.  Example: --js_init=&quot;{scheme: 'white'}&quot; would result in GateOne.init({scheme: 'white'})
&nbsp;&nbsp;--keyfile                        Path to the SSL keyfile.  Will be auto-generated if none is provided.
&nbsp;&nbsp;--kill                           Kill any running Gate One terminal processes including dtach'd processes.
&nbsp;&nbsp;--locale                         The locale (e.g. pt_PT) Gate One should use for translations.  If not provided, will default to $LANG (which is 'en_US' in your current shell), or en_US if not set.
&nbsp;&nbsp;--new_api_key                    Generate a new API key that an external application can use to embed Gate One.
&nbsp;&nbsp;--origins                        A semicolon-separated list of origins you wish to allow access to your Gate One server over the WebSocket.  This value must contain the hostnames and FQDNs (e.g. https://foo;https://foo.bar;) users will use to connect to your Gate One server as well as the hostnames/FQDNs of any sites that will be embedding Gate One. Here's the default on your system: 'https://localhost;https://yourhostname'. Alternatively, '*' may be  specified to allow access from anywhere.
&nbsp;&nbsp;--pam_realm                      Basic auth REALM to display when authenticating clients.  Default: hostname.  Only relevant if PAM authentication is enabled.
&nbsp;&nbsp;--pam_service                    PAM service to use.  Defaults to 'login'. Only relevant if PAM authentication is enabled.
&nbsp;&nbsp;--pid_file                       Path of the pid file.   Default: /tmp/gateone.pid
&nbsp;&nbsp;--port                           Run on the given port.
&nbsp;&nbsp;--session_dir                    Path to the location where session information will be stored.
&nbsp;&nbsp;--session_logging                If enabled, logs of user sessions will be saved in &lt;user_dir&gt;/&lt;user&gt;/logs.  Default: Enabled
&nbsp;&nbsp;--session_timeout                Amount of time that a session should be kept alive after the client has logged out.  Accepts &lt;num&gt;X where X could be one of s, m, h, or d for seconds, minutes, hours, and days.  Default is '5d' (5 days).
&nbsp;&nbsp;--sso_realm                      Kerberos REALM (aka DOMAIN) to use when authenticating clients. Only relevant if Kerberos authentication is enabled.
&nbsp;&nbsp;--sso_service                    Kerberos service (aka application) to use. Defaults to HTTP. Only relevant if Kerberos authentication is enabled.
&nbsp;&nbsp;--syslog_facility                Syslog facility to use when logging to syslog (if syslog_session_logging is enabled).  Must be one of: auth, cron, daemon, kern, local0, local1, local2, local3, local4, local5, local6, local7, lpr, mail, news, syslog, user, uucp.  Default: daemon
&nbsp;&nbsp;--syslog_host                    Remote host to send syslog messages to if syslog_logging is enabled.  Default: None (log to the local syslog daemon directly).  NOTE:  This setting is required on platforms that don't include Python's syslog module.
&nbsp;&nbsp;--syslog_session_logging         If enabled, logs of user sessions will be written to syslog.
&nbsp;&nbsp;--unix_socket_path               Run on the given socket file.  Default: /tmp/gateone.sock
&nbsp;&nbsp;--url_prefix                     An optional prefix to place before all Gate One URLs. e.g. '/gateone/'.  Use this if Gate One will be running behind a reverse proxy where you want it to be located at some sub-URL path.
&nbsp;&nbsp;--user_dir                       Path to the location where user files will be stored.
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some of these options (e.g. log_file_prefix) are inherent to the Tornado framework.  You won't find them anywhere in gateone.py.</p>
</div>
</div>
<div class="section" id="file-paths">
<h3>File Paths<a class="headerlink" href="#file-paths" title="Permalink to this headline">¶</a></h3>
<p>Gate One stores its files, temporary session information, and persistent user
data in the following locations (Note: Many of these are configurable):</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">File/Directory</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>authpam.py</td>
<td>Contains the PAM authentication Mixin used by auth.py.</td>
</tr>
<tr class="row-odd"><td>auth.py</td>
<td>Authentication classes.</td>
</tr>
<tr class="row-even"><td>certificate.pem</td>
<td>The default certificate Gate One will use in SSL communications.</td>
</tr>
<tr class="row-odd"><td>docs/</td>
<td>Gate One's documentation.</td>
</tr>
<tr class="row-even"><td>gateone.py</td>
<td>Gate One's primary executable/script. Also, the file containing this documentation</td>
</tr>
<tr class="row-odd"><td>i18n/</td>
<td>Gate One's internationalization (i18n) support and locale/translation files.</td>
</tr>
<tr class="row-even"><td>keyfile.pem</td>
<td>The default private key used with SSL communications.</td>
</tr>
<tr class="row-odd"><td>logviewer.py</td>
<td>A utility to view Gate One session logs.</td>
</tr>
<tr class="row-even"><td>plugins/</td>
<td>Plugins go here in the form of ./plugins/&lt;plugin name&gt;/&lt;plugin files|directories&gt;</td>
</tr>
<tr class="row-odd"><td>remote_syslog.py</td>
<td>A module that supports sending syslog messages over UDP to a remote syslog host.</td>
</tr>
<tr class="row-even"><td>server.conf</td>
<td>Gate One's configuration file.</td>
</tr>
<tr class="row-odd"><td>sso.py</td>
<td>A Kerberos Single Sign-on module for Tornado (used by auth.py)</td>
</tr>
<tr class="row-even"><td>static/</td>
<td>Non-dynamic files that get served to clients (e.g. gateone.js, gateone.css, etc).</td>
</tr>
<tr class="row-odd"><td>templates/</td>
<td>Tornado template files such as index.html.</td>
</tr>
<tr class="row-even"><td>terminal.py</td>
<td>A Pure Python terminal emulator module.</td>
</tr>
<tr class="row-odd"><td>termio.py</td>
<td>Terminal input/output control module.</td>
</tr>
<tr class="row-even"><td>tests/</td>
<td>Various scripts and tools to test Gate One's functionality.</td>
</tr>
<tr class="row-odd"><td>utils.py</td>
<td>Various supporting functions.</td>
</tr>
<tr class="row-even"><td>users/</td>
<td>Persistent user data in the form of ./users/&lt;username&gt;/&lt;user-specific files&gt;</td>
</tr>
<tr class="row-odd"><td>users/&lt;user&gt;/logs</td>
<td>This is where session logs get stored if session_logging is set.</td>
</tr>
<tr class="row-even"><td>/tmp/gateone</td>
<td>Temporary session data in the form of /tmp/gateone/&lt;session ID&gt;/&lt;files&gt;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="running">
<h3>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h3>
<p>Executing Gate One is as simple as:</p>
<pre class="ansi-block literal-block">
<span class="ansi-bold ansi-red">root</span>&#64;host<span class="ansi-bold ansi-blue">:~ $</span> ./gateone.py
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default Gate One will run on port 443 which requires root on most systems.  Use <tt class="xref py py-obj docutils literal"><span class="pre">--port=(something</span> <span class="pre">higher</span> <span class="pre">than</span> <span class="pre">1024)</span></tt> for non-root users.</p>
</div>
</div>
<div class="section" id="plugins">
<h3>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h3>
<p>Gate One includes support for any combination of the following types of plugins:</p>
<blockquote>
<div><ul class="simple">
<li>Python</li>
<li>JavaScript</li>
<li>CSS</li>
</ul>
</div></blockquote>
<p>Python plugins can integrate with Gate One in three ways:</p>
<blockquote>
<div><ul class="simple">
<li>Adding or overriding tornado.web.RequestHandlers (with a given regex).</li>
<li>Adding or overriding methods (aka &quot;commands&quot;) in ApplicationWebSocket.</li>
<li>Adding special plugin-specific escape sequence handlers (see the plugin development documentation for details on what/how these are/work).</li>
</ul>
</div></blockquote>
<p>JavaScript plugins will be added to the &lt;body&gt; tag of Gate One's base index.html
template by way of a single file (<tt class="xref py py-obj docutils literal"><span class="pre">{{gateone_js}}</span></tt> below) that is the
concatenation of all plugins' JS templates:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;{{gateone_js}}&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</div>
<p>CSS plugins are similar to JavaScript but instead of being appended to the
&lt;body&gt; they are added to the &lt;head&gt; by way of a WebSocket download and some
fancy JavaScript inside of gateone.js:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">CSSPluginAction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Loads the CSS for a given plugin by adding a &lt;link&gt; tag to the &lt;head&gt;</span>
    <span class="kd">var</span> <span class="nx">queries</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span> <span class="c1">// So we can parse out the plugin name and the template</span>
        <span class="nx">plugin</span> <span class="o">=</span> <span class="nx">queries</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nx">file</span> <span class="o">=</span> <span class="nx">queries</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="c1">// The /cssrender method needs the prefix and the container</span>
    <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;&amp;container=&#39;</span> <span class="o">+</span> <span class="nx">GateOne</span><span class="p">.</span><span class="nx">prefs</span><span class="p">.</span><span class="nx">goDiv</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;&amp;prefix=&#39;</span> <span class="o">+</span> <span class="nx">GateOne</span><span class="p">.</span><span class="nx">prefs</span><span class="p">.</span><span class="nx">prefix</span><span class="p">;</span>
    <span class="nx">url</span> <span class="o">=</span> <span class="nx">GateOne</span><span class="p">.</span><span class="nx">prefs</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="nx">url</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">GateOne</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">loadCSS</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">plugin</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="nx">file</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are also hooks throughout Gate One's code for plugins to add or override
Gate One's functionality.  Documentation on how to write plugins can be found in
the Plugin Development docs.  From the perspective of gateone.py, it performs
the following tasks in relation to plugins:</p>
<blockquote>
<div><ul class="simple">
<li>Imports Python plugins and connects their hooks.</li>
<li>Creates symbolic links inside ./static/ that point to each plugin's respective /static/ directory and serves them to clients.</li>
<li>Serves the index.html that includes plugins' respective .js and .css files.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="class-docstrings">
<h2>Class Docstrings<a class="headerlink" href="#class-docstrings" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="gateone._">
<tt class="descclassname">gateone.</tt><tt class="descname">_</tt><big>(</big><em>string</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone._" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps user_locale.translate so we can .encode('UTF-8') when writing to
stdout.  This function will get overridden by the regular translate()
function in __main__</p>
</dd></dl>

<dl class="function">
<dt id="gateone.require_auth">
<tt class="descclassname">gateone.</tt><tt class="descname">require_auth</tt><big>(</big><em>method</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#require_auth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.require_auth" title="Permalink to this definition">¶</a></dt>
<dd><p>An equivalent to tornado.web.authenticated for WebSockets
(ApplicationWebSocket, specifically).</p>
</dd></dl>

<dl class="function">
<dt id="gateone.kill_all_sessions">
<tt class="descclassname">gateone.</tt><tt class="descname">kill_all_sessions</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#kill_all_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.kill_all_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls all 'timeout_callbacks' attached to all <tt class="xref py py-obj docutils literal"><span class="pre">SESSIONS</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.timeout_sessions">
<tt class="descclassname">gateone.</tt><tt class="descname">timeout_sessions</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#timeout_sessions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.timeout_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Loops over the SESSIONS dict killing any sessions that haven't been used
for the length of time specified in <em>TIMEOUT</em> (global).  The value of
<em>TIMEOUT</em> can be set in server.conf or specified on the command line via the
<em>session_timeout</em> value.  Arguments:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function is meant to be called via Tornado's <tt class="xref py py-meth docutils literal"><span class="pre">PeriodicCallback()</span></tt>.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="gateone.HTTPSRedirectHandler">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">HTTPSRedirectHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#HTTPSRedirectHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.HTTPSRedirectHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>A handler to redirect clients from HTTP to HTTPS.</p>
<dl class="method">
<dt id="gateone.HTTPSRedirectHandler.get">
<tt class="descname">get</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#HTTPSRedirectHandler.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.HTTPSRedirectHandler.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Just redirects the client from HTTP to HTTPS</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gateone.StaticHandler">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">StaticHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#StaticHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.StaticHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>An override of <a class="reference external" href="http://www.tornadoweb.org/documentation/web.html#tornado.web.StaticFileHandler" title="(in Tornado v2.4.1)"><tt class="xref py py-class docutils literal"><span class="pre">tornado.web.StaticFileHandler</span></tt></a> to ensure that the
Access-Control-Allow-Origin header gets set correctly.</p>
<dl class="method">
<dt id="gateone.StaticHandler.set_extra_headers">
<tt class="descname">set_extra_headers</tt><big>(</big><em>path</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#StaticHandler.set_extra_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.StaticHandler.set_extra_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the Access-Control-Allow-Origin header to allow cross-origin
access to static content for applications embedding Gate One.
Specifically, this is necessary in order to support loading fonts
from different origins.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gateone.BaseHandler">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">BaseHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#BaseHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.BaseHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>A base handler that all Gate One RequestHandlers will inherit methods from.</p>
<dl class="method">
<dt id="gateone.BaseHandler.get_current_user">
<tt class="descname">get_current_user</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#BaseHandler.get_current_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.BaseHandler.get_current_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Tornado standard method--implemented our way.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gateone.DownloadHandler">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">DownloadHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#DownloadHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.DownloadHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://www.tornadoweb.org/documentation/web.html#tornado.web.RequestHandler" title="(in Tornado v2.4.1)"><tt class="xref py py-class docutils literal"><span class="pre">tornado.web.RequestHandler</span></tt></a> to serve up files that wind up in a
given user's <tt class="xref py py-obj docutils literal"><span class="pre">session_dir</span></tt> in the 'downloads' directory.  Generally speaking
these files are generated by the terminal emulator (e.g. cat somefile.pdf)
but it could be used by plugins as a way to serve up temporary files as
well.</p>
</dd></dl>

<dl class="class">
<dt id="gateone.MainHandler">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">MainHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#MainHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.MainHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders index.html which loads Gate One.</p>
<p>Will include the minified version of gateone.js if available as
gateone.min.js.</p>
<p>Will encode GATEONE_DIR/static/bell.ogg as a <a class="reference external" href="data:URI">data:URI</a> and put it as the
&lt;source&gt; of the &lt;audio&gt; tag inside the index.html template.  Gate One
administrators can replace bell.ogg with whatever they like but the file
size should be less than 32k when encoded to Base64.</p>
</dd></dl>

<dl class="class">
<dt id="gateone.PluginCSSTemplateHandler">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">PluginCSSTemplateHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#PluginCSSTemplateHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.PluginCSSTemplateHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders plugin CSS template files, passing them the same <em>prefix</em> and
<em>container</em> variables used by the StyleHandler.  This is so we don't need a
CSS template rendering function in every plugin that needs to use {{prefix}}
or {{container}}.</p>
<p>gateone.js will automatically load all *.css files in plugin template
directories using this method.</p>
</dd></dl>

<dl class="class">
<dt id="gateone.GOApplication">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">GOApplication</tt><big>(</big><em>ws</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#GOApplication"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.GOApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>The base from which all Gate One Applications will inherit.  Applications
are expected to be written like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SomeApplication</span><span class="p">(</span><span class="n">GOApplication</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Called when the Application is instantiated.&quot;</span>
        <span class="n">initialize_stuff</span><span class="p">()</span>
        <span class="c"># Here&#39;s some good things to do in an initialize() function...</span>
        <span class="c"># Register a policy-checking function:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;some_app&#39;</span><span class="p">:</span> <span class="n">policy_checking_func</span><span class="p">})</span>
        <span class="c"># Register some WebSocket actions (note the app:action naming convention)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s">&#39;some_app:do_stuff&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_stuff</span><span class="p">,</span>
            <span class="s">&#39;some_app:do_other_stuff&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">do_other_stuff</span>
        <span class="p">})</span>
    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Called when the connection is established.&quot;</span>
        <span class="c"># Setup whatever is necessary for session tracking and whatnot.</span>
    <span class="k">def</span> <span class="nf">authenticate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Called when the user *successfully* authenticates.&quot;</span>
        <span class="c"># Here&#39;s the best place to instantiate things, send the user</span>
        <span class="c"># JavaScript/CSS files, and similar post-authentication details.</span>
    <span class="k">def</span> <span class="nf">on_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;Called when the connection is closed.&quot;</span>
        <span class="c"># This is a good place to halt any background/periodic operations.</span>
</pre></div>
</div>
<p>GOApplications will be automatically imported into Gate One and registered
appropriately as long as they follow the following conventions:</p>
<blockquote>
<div><ul class="simple">
<li>The application and its module(s) should live inside its own directory inside the 'applications' directory.  For example, <tt class="xref py py-obj docutils literal"><span class="pre">/opt/gateone/applications/some_app/some_app.py</span></tt></li>
<li>Subclasses of <a class="reference internal" href="#gateone.GOApplication" title="gateone.GOApplication"><tt class="xref py py-obj docutils literal"><span class="pre">GOApplication</span></tt></a> must be added to an <tt class="xref py py-obj docutils literal"><span class="pre">apps</span></tt> global (list) inside of the application's module(s) like so: <tt class="xref py py-obj docutils literal"><span class="pre">apps</span> <span class="pre">=</span> <span class="pre">[SomeApplication]</span></tt> (usually a good idea to put that at the very bottom of the module).</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All .py modules inside of the application's main directory will be imported even if they do not contain or register a <a class="reference internal" href="#gateone.GOApplication" title="gateone.GOApplication"><tt class="xref py py-obj docutils literal"><span class="pre">GOApplication</span></tt></a>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You can add command line arguments to Gate One by calling <a class="reference external" href="http://www.tornadoweb.org/documentation/options.html#tornado.options.define" title="(in Tornado v2.4.1)"><tt class="xref py py-func docutils literal"><span class="pre">tornado.options.define()</span></tt></a> anywhere in your application's global namespace.  This works because the <a class="reference external" href="http://www.tornadoweb.org/documentation/options.html#tornado.options.define" title="(in Tornado v2.4.1)"><tt class="xref py py-func docutils literal"><span class="pre">define()</span></tt></a> function registers options in Gate One's global namespace (as <a class="reference external" href="http://www.tornadoweb.org/documentation/options.html#tornado.options.options" title="(in Tornado v2.4.1)"><tt class="xref py py-obj docutils literal"><span class="pre">tornado.options.options</span></tt></a>) and Gate One imports application modules before it evaluates command line arguments.</p>
</div>
<dl class="method">
<dt id="gateone.GOApplication.initialize">
<tt class="descname">initialize</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#GOApplication.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.GOApplication.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by <a class="reference internal" href="#gateone.ApplicationWebSocket.open" title="gateone.ApplicationWebSocket.open"><tt class="xref py py-meth docutils literal"><span class="pre">ApplicationWebSocket.open()</span></tt></a> after __init__().
GOApplications can override this function to perform their own actions
when the WebSocket is initialized.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.GOApplication.open">
<tt class="descname">open</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#GOApplication.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.GOApplication.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by <a class="reference internal" href="#gateone.ApplicationWebSocket.open" title="gateone.ApplicationWebSocket.open"><tt class="xref py py-meth docutils literal"><span class="pre">ApplicationWebSocket.open()</span></tt></a> after the WebSocket is
opened.  GOApplications can override this function to perform their own
actions when the WebSocket is opened.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.GOApplication.on_close">
<tt class="descname">on_close</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#GOApplication.on_close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.GOApplication.on_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by <a class="reference internal" href="#gateone.ApplicationWebSocket.on_close" title="gateone.ApplicationWebSocket.on_close"><tt class="xref py py-meth docutils literal"><span class="pre">ApplicationWebSocket.on_close()</span></tt></a> after the WebSocket is
closed.  GOApplications can override this function to perform their own
actions when the WebSocket is closed.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.GOApplication.add_handler">
<tt class="descname">add_handler</tt><big>(</big><em>pattern</em>, <em>handler</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#GOApplication.add_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.GOApplication.add_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the given <em>handler</em> (<a class="reference external" href="http://www.tornadoweb.org/documentation/web.html#tornado.web.RequestHandler" title="(in Tornado v2.4.1)"><tt class="xref py py-obj docutils literal"><span class="pre">tornado.web.RequestHandler</span></tt></a>) to the Tornado
Application (<tt class="xref py py-obj docutils literal"><span class="pre">self.ws.application</span></tt>) to handle URLs matching <em>pattern</em>.
If given, <em>kwargs</em> will be added to the <a class="reference external" href="http://www.tornadoweb.org/documentation/web.html#tornado.web.URLSpec" title="(in Tornado v2.4.1)"><tt class="xref py py-obj docutils literal"><span class="pre">tornado.web.URLSpec</span></tt></a> when the
complete handler is assembled.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <em>pattern</em> does not start with the configured <tt class="xref py py-obj docutils literal"><span class="pre">url_prefix</span></tt> it will be automatically prepended.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gateone.ApplicationWebSocket">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">ApplicationWebSocket</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket" title="Permalink to this definition">¶</a></dt>
<dd><p>The main WebSocket interface for Gate One, this class is setup to call
'commands' which are methods registered in self.commands.  Methods that are
registered this way will be exposed and directly callable over the
WebSocket.</p>
<dl class="method">
<dt id="gateone.ApplicationWebSocket.initialize">
<tt class="descname">initialize</tt><big>(</big><em>apps=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>This gets called by the Tornado framework when ApplicationWebSocket is
instantiated.  It will be passed the list of <em>apps</em> (Gate One
applications) that are assigned inside the <tt class="xref py py-class docutils literal"><span class="pre">Application</span></tt> object.
These <em>apps</em> will be mutated in-place so that <tt class="xref py py-obj docutils literal"><span class="pre">self</span></tt> will refer to the
current instance of <a class="reference internal" href="#gateone.ApplicationWebSocket" title="gateone.ApplicationWebSocket"><tt class="xref py py-class docutils literal"><span class="pre">ApplicationWebSocket</span></tt></a>.  Kind of like a
dynamic mixin.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.on">
<tt class="descname">on</tt><big>(</big><em>events</em>, <em>callback</em>, <em>times=None</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.on"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.on" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers the given <em>callback</em> with the given <em>events</em> (string or list
of strings) that will get called whenever the given <em>event</em> is triggered
(using <a class="reference internal" href="#gateone.ApplicationWebSocket.trigger" title="gateone.ApplicationWebSocket.trigger"><tt class="xref py py-meth docutils literal"><span class="pre">ApplicationWebSocket.trigger()</span></tt></a>).  It works similarly to
<tt class="xref js js-meth docutils literal"><span class="pre">GateOne.Events.on()</span></tt> in gateone.js.</p>
<p>If <em>times</em> is given the <em>callback</em> will only be fired that many times
before it is automatically removed from
<tt class="xref py py-attr docutils literal"><span class="pre">ApplicationWebSocket._events</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.off">
<tt class="descname">off</tt><big>(</big><em>events</em>, <em>callback</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.off"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.off" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the given <em>callback</em> from the given <em>events</em> (string or list of
strings).</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.once">
<tt class="descname">once</tt><big>(</big><em>events</em>, <em>callback</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.once" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut for <tt class="xref py py-meth docutils literal"><span class="pre">ApplicationWebSocket.on(events,</span> <span class="pre">callback,</span> <span class="pre">1)()</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.trigger">
<tt class="descname">trigger</tt><big>(</big><em>events</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.trigger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.trigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Fires the given <em>events</em> (string or list of strings).  All callbacks
associated with these <em>events</em> will be called and if their respective
objects have a <em>times</em> value set it will be used to determine when to
remove the associated callback from the event.</p>
<p>If given, callbacks associated with the given <em>events</em> will be called
with <em>args</em> and <em>kwargs</em>.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.allow_draft76">
<tt class="descname">allow_draft76</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.allow_draft76"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.allow_draft76" title="Permalink to this definition">¶</a></dt>
<dd><p>By overriding this function we're allowing the older version of the
WebSockets protocol.  As long as communications happens over SSL there
shouldn't be any security concerns with this.  This is mostly to support
iOS Safari.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.get_current_user">
<tt class="descname">get_current_user</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.get_current_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.get_current_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Mostly identical to the function of the same name in MainHandler.  The
difference being that when API authentication is enabled the WebSocket
will expect and perform its own auth of the client.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.open">
<tt class="descname">open</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a new WebSocket is opened.  Will deny access to any
origin that is not defined in self.settings['origin'].</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.on_message">
<tt class="descname">on_message</tt><big>(</big><em>message</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.on_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.on_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when we receive a message from the client.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.on_close">
<tt class="descname">on_close</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.on_close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.on_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the client terminates the connection.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Normally self.refresh_screen() catches the disconnect first and this method won't end up being called.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.pong">
<tt class="descname">pong</tt><big>(</big><em>timestamp</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.pong"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.pong" title="Permalink to this definition">¶</a></dt>
<dd><p>Responds to a client 'ping' request...  Just returns the given
timestamp back to the client so it can measure round-trip time.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.authenticate">
<tt class="descname">authenticate</tt><big>(</big><em>settings</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.authenticate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.authenticate" title="Permalink to this definition">¶</a></dt>
<dd><p>Authenticates the client by first trying to use the 'gateone_user'
cookie or if Gate One is configured to use API authentication it will
use <em>settings['auth']</em>.  Additionally, it will accept
<em>settings['container']</em> and <em>settings['prefix']</em> to apply those to the
equivalent properties (self.container and self.prefix).</p>
<p>If <em>settings['location']</em> is something other than 'default' all new
terminals will be associated with the given (string) value.  These
terminals will be treated separately from the usual terminals so they
can exist in a different browser tab/window.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.get_style">
<tt class="descname">get_style</tt><big>(</big><em>settings</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.get_style"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.get_style" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the CSS stylesheets matching the properties specified in
<em>settings</em> to the client.  <em>settings</em> must contain the following:</p>
<blockquote>
<div><ul class="simple">
<li><strong>container</strong> - The element Gate One resides in (e.g. 'gateone')</li>
<li><strong>prefix</strong> - The string being used to prefix all elements (e.g. 'go_')</li>
</ul>
</div></blockquote>
<p><em>settings</em> may also contain any combination of the following:</p>
<blockquote>
<div><ul class="simple">
<li><strong>theme</strong> - The name of the CSS theme to be retrieved.</li>
<li><strong>colors</strong> - The name of the text color CSS scheme to be retrieved.</li>
<li><strong>plugins</strong> - If true, will send all plugin .css files to the client.</li>
<li><strong>print</strong> - If true, will send the print stylesheet.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.send_js_or_css">
<tt class="descname">send_js_or_css</tt><big>(</big><em>path_or_fileobj</em>, <em>kind</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.send_js_or_css"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.send_js_or_css" title="Permalink to this definition">¶</a></dt>
<dd><p>If <em>kind</em> is 'js', reads the given JavaScript file at <em>path_or_fileobj</em>
and sends it to the client using the 'load_js' WebSocket action.
If <em>kind</em> is 'css', reads the given CSS file at <em>path_or_fileobj</em>
and sends it to the client using the 'load_style' WebSocket action.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Files will be cached after being minified until a file is modified or Gate One is restarted.</p>
</div>
<p>If the <tt class="xref py py-obj docutils literal"><span class="pre">slimit</span></tt> module is installed JavaScript files will be minified
before being sent to the client.
If the <tt class="xref py py-obj docutils literal"><span class="pre">cssmin</span></tt> module is installed CSS files will be minified before
being sent to the client.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.send_js">
<tt class="descname">send_js</tt><big>(</big><em>path</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.send_js"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.send_js" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut for <tt class="xref py py-obj docutils literal"><span class="pre">self.send_js_or_css(path,</span> <span class="pre">'js')</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.send_css">
<tt class="descname">send_css</tt><big>(</big><em>path</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.send_css"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.send_css" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut for <tt class="xref py py-obj docutils literal"><span class="pre">self.send_js_or_css(path,</span> <span class="pre">'css')</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.send_static_files">
<tt class="descname">send_static_files</tt><big>(</big><em>plugins_dir</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.send_static_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.send_static_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends all plugin .js and .css files to the client that exist inside
<em>plugins_dir</em>.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.enumerate_themes">
<tt class="descname">enumerate_themes</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.enumerate_themes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.enumerate_themes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a JSON-encoded object containing the installed themes and text
color schemes.</p>
</dd></dl>

<dl class="method">
<dt id="gateone.ApplicationWebSocket.send_message">
<tt class="descname">send_message</tt><big>(</big><em>message</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ApplicationWebSocket.send_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ApplicationWebSocket.send_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the given <em>message</em> to the client using the 'notice' WebSocket
action at the client.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gateone.ErrorHandler">
<em class="property">class </em><tt class="descclassname">gateone.</tt><tt class="descname">ErrorHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>status_code</em><big>)</big><a class="reference internal" href="../_modules/gateone.html#ErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.ErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an error response with status_code for all requests.</p>
</dd></dl>

<dl class="function">
<dt id="gateone.define_options">
<tt class="descclassname">gateone.</tt><tt class="descname">define_options</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/gateone.html#define_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gateone.define_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference external" href="http://www.tornadoweb.org/documentation/options.html#tornado.options.define" title="(in Tornado v2.4.1)"><tt class="xref py py-obj docutils literal"><span class="pre">tornado.options.define</span></tt></a> for all of Gate One's command-line options.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/ls_logo_1inch_300dpi.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">gateone.py</span></tt> - Gate One's Main Script</a><ul>
<li><a class="reference internal" href="#gate-one">Gate One</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#settings">Settings</a></li>
<li><a class="reference internal" href="#file-paths">File Paths</a></li>
<li><a class="reference internal" href="#running">Running</a></li>
<li><a class="reference internal" href="#plugins">Plugins</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-docstrings">Class Docstrings</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="authpam.html"
                        title="previous chapter"><tt class="docutils literal docutils literal docutils literal"><span class="pre">authpam.py</span></tt> - A PAM Authentication Module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="logviewer.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">logviewer.py</span></tt> - Session Log Viewer</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/Developer/gateone.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="logviewer.html" title="logviewer.py - Session Log Viewer"
             >next</a> |</li>
        <li class="right" >
          <a href="authpam.html" title="authpam.py - A PAM Authentication Module"
             >previous</a> |</li>
        <li><a href="../index.html">Gate One Documentation</a> &raquo;</li>
          <li><a href="index.html" >Developer Documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2011, Liftoff Software Corporation.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<script type="text/javascript">
window.onload = function(e) {
    // Make our collapseindex elements actually collapsible
    $('<span class="collapsindextitle">Index</span> <a class="showhide">[show]</a>').insertBefore('.collapseindex');
    $('.showhide').each(function(index, value){
        var showHide = $(this);
        showHide.click(function() {
            if (this.innerHTML == "[hide]") {
                this.innerHTML = "[show]";
            } else {
                this.innerHTML = "[hide]";
            }
            $(this).next('.collapseindex').toggle(1); // This should always be the next .collapseindex element
        });
    });
    $('.collapseindex').each(function(index, value){
        // Start them out hidden
        $(this).hide();
    });
}
</script>

  </body>
</html>